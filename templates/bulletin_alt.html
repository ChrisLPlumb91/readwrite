{% extends 'bulletin.html' %}

{% block modal %}
<div class="modal" tabindex="-1" id="delete-dialog" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete Comment</h5>
                <a href="{% url 'bulletin' bulletin.slug %}" class="btn btn-close" aria-label="Close"></a>
            </div>
            {% if comment == 0 %}
            <div class="modal-body">
                <p>Are you sure you want to delete this bulletin?</p>
            </div>
            {% else %}
            <div class="modal-body">
                <p>Are you sure you want to delete this comment?</p>
            </div>
            {% endif %}
            <div class="modal-footer">
                <a href="{% url 'bulletin' bulletin.slug %}" class="btn btn-secondary">No</a>
                {% if comment == 0 %}
                <form method="POST" action="{% url 'confirm_delete' bulletin.slug %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Delete</button>
                </form>
                {% else %}
                <form method="POST" action="{% url 'comment_delete' bulletin.slug %}?query={{ comment.id }}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Delete</button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        var modalDiv = document.getElementById('delete-dialog')
        var myModal = new bootstrap.Modal(modalDiv)
        myModal.show();
    });
</script>
{% endblock %}